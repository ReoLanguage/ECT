/*******************************************************************************
 * <copyright>
 * This file is part of the Extensible Coordination Tools (ECT).
 * Copyright (c) 2013 ECT developers. 
 * All rights reserved. This program and the accompanying materials
 * are made available under the terms of the Eclipse Public License v1.0
 * which accompanies this distribution, and is available at
 * http://www.eclipse.org/legal/epl-v10.html
 * </copyright>
 *******************************************************************************/
package org.ect.reo.aut2fsp;

import java.util.ArrayList;

public class FSPPropertyBasedReducer {
	public static String newline = System.getProperty("line.separator");
	 
	private int loc;
	public static void main(String[] args) {
		FSPPropertyBasedReducer r = new FSPPropertyBasedReducer();
		System.out.println("started...");
		String sysdesc = "STATE0 = (ordercancelrequestinordercancelrequestin0->STATE1 | initialnode1outreceiveorderinreceiveorderin0->STATE2 | initialnode1ordercancelrequestinordercancelrequestin0outreceiveorderinreceiveorderin0->STATE3), STATE1 = (initialnode1outreceiveorderinreceiveorderin0->STATE3), STATE10 = (closeorderoutcloseorderout0flowfinalnode1in0->STATE2 | receiveorderoutreceiveorderout0->STATE4 | closeorderoutcloseorderout0flowfinalnode1in0receiveorderoutreceiveorderout0->STATE0 | fillorderinfillorderin0receiveorderoutreceiveorderout0->STATE6 | closeorderoutcloseorderout0fillorderinfillorderin0flowfinalnode1in0receiveorderoutreceiveorderout0->STATE5 | ordercancelrequestinordercancelrequestin0->STATE11 | closeorderoutcloseorderout0flowfinalnode1in0ordercancelrequestinordercancelrequestin0->STATE3 | ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0->STATE7 | closeorderoutcloseorderout0flowfinalnode1in0ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0->STATE1 | fillorderinfillorderin0ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0->STATE9 | closeorderoutcloseorderout0fillorderinfillorderin0flowfinalnode1in0ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0->STATE8), STATE11 = (closeorderoutcloseorderout0flowfinalnode1in0->STATE3 | receiveorderoutreceiveorderout0->STATE7 | closeorderoutcloseorderout0flowfinalnode1in0receiveorderoutreceiveorderout0->STATE1 | fillorderinfillorderin0receiveorderoutreceiveorderout0->STATE9 | closeorderoutcloseorderout0fillorderinfillorderin0flowfinalnode1in0receiveorderoutreceiveorderout0->STATE8), STATE12 = (invoicecentralbufferinsendinvoiceoutsendinvoiceout0->STATE24 | ordercancelrequestinordercancelrequestin0->STATE13 | invoicecentralbufferinordercancelrequestinordercancelrequestin0sendinvoiceoutsendinvoiceout0->STATE25 | initialnode1outreceiveorderinreceiveorderin0->STATE15 | initialnode1invoicecentralbufferinoutreceiveorderinreceiveorderin0sendinvoiceoutsendinvoiceout0->STATE26 | initialnode1ordercancelrequestinordercancelrequestin0outreceiveorderinreceiveorderin0->STATE17 | initialnode1invoicecentralbufferinordercancelrequestinordercancelrequestin0outreceiveorderinreceiveorderin0sendinvoiceoutsendinvoiceout0->STATE27), STATE13 = (invoicecentralbufferinsendinvoiceoutsendinvoiceout0->STATE25 | initialnode1outreceiveorderinreceiveorderin0->STATE17 | initialnode1invoicecentralbufferinoutreceiveorderinreceiveorderin0sendinvoiceoutsendinvoiceout0->STATE27), STATE14 = (fillorderoutfillorderout0forknode1sendinvoiceinsendinvoicein0shiporderinshiporderin0->STATE15 | receiveorderoutreceiveorderout0->STATE5 | closeorderincloseorderin0receiveorderoutreceiveorderout0->STATE6 | fillorderoutfillorderout0forknode1receiveorderoutreceiveorderout0sendinvoiceinsendinvoicein0shiporderinshiporderin0->STATE12 | closeorderincloseorderin0fillorderoutfillorderout0forknode1receiveorderoutreceiveorderout0sendinvoiceinsendinvoicein0shiporderinshiporderin0->STATE18 | ordercancelrequestinordercancelrequestin0->STATE16 | fillorderoutfillorderout0forknode1ordercancelrequestinordercancelrequestin0sendinvoiceinsendinvoicein0shiporderinshiporderin0->STATE17 | ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0->STATE8 | closeorderincloseorderin0ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0->STATE9 | fillorderoutfillorderout0forknode1ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0sendinvoiceinsendinvoicein0shiporderinshiporderin0->STATE13 | closeorderincloseorderin0fillorderoutfillorderout0forknode1ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0sendinvoiceinsendinvoicein0shiporderinshiporderin0->STATE19), STATE15 = (invoicecentralbufferinsendinvoiceoutsendinvoiceout0->STATE26 | receiveorderoutreceiveorderout0->STATE12 | closeorderincloseorderin0receiveorderoutreceiveorderout0->STATE18 | invoicecentralbufferinreceiveorderoutreceiveorderout0sendinvoiceoutsendinvoiceout0->STATE24 | closeorderincloseorderin0invoicecentralbufferinreceiveorderoutreceiveorderout0sendinvoiceoutsendinvoiceout0->STATE28 | fillorderinfillorderin0receiveorderoutreceiveorderout0->STATE29 | closeorderincloseorderin0fillorderinfillorderin0receiveorderoutreceiveorderout0->STATE30 | fillorderinfillorderin0invoicecentralbufferinreceiveorderoutreceiveorderout0sendinvoiceoutsendinvoiceout0->STATE31 | closeorderincloseorderin0fillorderinfillorderin0invoicecentralbufferinreceiveorderoutreceiveorderout0sendinvoiceoutsendinvoiceout0->STATE32 | ordercancelrequestinordercancelrequestin0->STATE17 | invoicecentralbufferinordercancelrequestinordercancelrequestin0sendinvoiceoutsendinvoiceout0->STATE27 | ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0->STATE13 | closeorderincloseorderin0ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0->STATE19 | invoicecentralbufferinordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0sendinvoiceoutsendinvoiceout0->STATE25 | closeorderincloseorderin0invoicecentralbufferinordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0sendinvoiceoutsendinvoiceout0->STATE33 | fillorderinfillorderin0ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0->STATE34 | closeorderincloseorderin0fillorderinfillorderin0ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0->STATE35 | fillorderinfillorderin0invoicecentralbufferinordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0sendinvoiceoutsendinvoiceout0->STATE36 | closeorderincloseorderin0fillorderinfillorderin0invoicecentralbufferinordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0sendinvoiceoutsendinvoiceout0->STATE37), STATE16 = (fillorderoutfillorderout0forknode1sendinvoiceinsendinvoicein0shiporderinshiporderin0->STATE17 | receiveorderoutreceiveorderout0->STATE8 | closeorderincloseorderin0receiveorderoutreceiveorderout0->STATE9 | fillorderoutfillorderout0forknode1receiveorderoutreceiveorderout0sendinvoiceinsendinvoicein0shiporderinshiporderin0->STATE13 | closeorderincloseorderin0fillorderoutfillorderout0forknode1receiveorderoutreceiveorderout0sendinvoiceinsendinvoicein0shiporderinshiporderin0->STATE19), STATE17 = (invoicecentralbufferinsendinvoiceoutsendinvoiceout0->STATE27 | receiveorderoutreceiveorderout0->STATE13 | closeorderincloseorderin0receiveorderoutreceiveorderout0->STATE19 | invoicecentralbufferinreceiveorderoutreceiveorderout0sendinvoiceoutsendinvoiceout0->STATE25 | closeorderincloseorderin0invoicecentralbufferinreceiveorderoutreceiveorderout0sendinvoiceoutsendinvoiceout0->STATE33 | fillorderinfillorderin0receiveorderoutreceiveorderout0->STATE34 | closeorderincloseorderin0fillorderinfillorderin0receiveorderoutreceiveorderout0->STATE35 | fillorderinfillorderin0invoicecentralbufferinreceiveorderoutreceiveorderout0sendinvoiceoutsendinvoiceout0->STATE36 | closeorderincloseorderin0fillorderinfillorderin0invoicecentralbufferinreceiveorderoutreceiveorderout0sendinvoiceoutsendinvoiceout0->STATE37), STATE18 = (closeorderoutcloseorderout0flowfinalnode1in0->STATE12 | invoicecentralbufferinsendinvoiceoutsendinvoiceout0->STATE28 | closeorderoutcloseorderout0flowfinalnode1in0invoicecentralbufferinsendinvoiceoutsendinvoiceout0->STATE24 | ordercancelrequestinordercancelrequestin0->STATE19 | closeorderoutcloseorderout0flowfinalnode1in0ordercancelrequestinordercancelrequestin0->STATE13 | invoicecentralbufferinordercancelrequestinordercancelrequestin0sendinvoiceoutsendinvoiceout0->STATE33 | closeorderoutcloseorderout0flowfinalnode1in0invoicecentralbufferinordercancelrequestinordercancelrequestin0sendinvoiceoutsendinvoiceout0->STATE25 | initialnode1outreceiveorderinreceiveorderin0->STATE21 | closeorderoutcloseorderout0flowfinalnode1in0initialnode1outreceiveorderinreceiveorderin0->STATE15 | initialnode1invoicecentralbufferinoutreceiveorderinreceiveorderin0sendinvoiceoutsendinvoiceout0->STATE38 | closeorderoutcloseorderout0flowfinalnode1in0initialnode1invoicecentralbufferinoutreceiveorderinreceiveorderin0sendinvoiceoutsendinvoiceout0->STATE26 | initialnode1ordercancelrequestinordercancelrequestin0outreceiveorderinreceiveorderin0->STATE23 | closeorderoutcloseorderout0flowfinalnode1in0initialnode1ordercancelrequestinordercancelrequestin0outreceiveorderinreceiveorderin0->STATE17 | initialnode1invoicecentralbufferinordercancelrequestinordercancelrequestin0outreceiveorderinreceiveorderin0sendinvoiceoutsendinvoiceout0->STATE39 | closeorderoutcloseorderout0flowfinalnode1in0initialnode1invoicecentralbufferinordercancelrequestinordercancelrequestin0outreceiveorderinreceiveorderin0sendinvoiceoutsendinvoiceout0->STATE27), STATE19 = (closeorderoutcloseorderout0flowfinalnode1in0->STATE13 | invoicecentralbufferinsendinvoiceoutsendinvoiceout0->STATE33 | closeorderoutcloseorderout0flowfinalnode1in0invoicecentralbufferinsendinvoiceoutsendinvoiceout0->STATE25 | initialnode1outreceiveorderinreceiveorderin0->STATE23 | closeorderoutcloseorderout0flowfinalnode1in0initialnode1outreceiveorderinreceiveorderin0->STATE17 | initialnode1invoicecentralbufferinoutreceiveorderinreceiveorderin0sendinvoiceoutsendinvoiceout0->STATE39 | closeorderoutcloseorderout0flowfinalnode1in0initialnode1invoicecentralbufferinoutreceiveorderinreceiveorderin0sendinvoiceoutsendinvoiceout0->STATE27), STATE2 = (receiveorderoutreceiveorderout0->STATE0 | closeorderincloseorderin0receiveorderoutreceiveorderout0->STATE4 | fillorderinfillorderin0receiveorderoutreceiveorderout0->STATE5 | closeorderincloseorderin0fillorderinfillorderin0receiveorderoutreceiveorderout0->STATE6 | ordercancelrequestinordercancelrequestin0->STATE3 | ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0->STATE1 | closeorderincloseorderin0ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0->STATE7 | fillorderinfillorderin0ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0->STATE8 | closeorderincloseorderin0fillorderinfillorderin0ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0->STATE9), STATE20 = (closeorderoutcloseorderout0flowfinalnode1in0->STATE14 | fillorderoutfillorderout0forknode1sendinvoiceinsendinvoicein0shiporderinshiporderin0->STATE21 | closeorderoutcloseorderout0fillorderoutfillorderout0flowfinalnode1forknode1in0sendinvoiceinsendinvoicein0shiporderinshiporderin0->STATE15 | receiveorderoutreceiveorderout0->STATE6 | closeorderoutcloseorderout0flowfinalnode1in0receiveorderoutreceiveorderout0->STATE5 | fillorderoutfillorderout0forknode1receiveorderoutreceiveorderout0sendinvoiceinsendinvoicein0shiporderinshiporderin0->STATE18 | closeorderoutcloseorderout0fillorderoutfillorderout0flowfinalnode1forknode1in0receiveorderoutreceiveorderout0sendinvoiceinsendinvoicein0shiporderinshiporderin0->STATE12 | ordercancelrequestinordercancelrequestin0->STATE22 | closeorderoutcloseorderout0flowfinalnode1in0ordercancelrequestinordercancelrequestin0->STATE16 | fillorderoutfillorderout0forknode1ordercancelrequestinordercancelrequestin0sendinvoiceinsendinvoicein0shiporderinshiporderin0->STATE23 | closeorderoutcloseorderout0fillorderoutfillorderout0flowfinalnode1forknode1in0ordercancelrequestinordercancelrequestin0sendinvoiceinsendinvoicein0shiporderinshiporderin0->STATE17 | ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0->STATE9 | closeorderoutcloseorderout0flowfinalnode1in0ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0->STATE8 | fillorderoutfillorderout0forknode1ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0sendinvoiceinsendinvoicein0shiporderinshiporderin0->STATE19 | closeorderoutcloseorderout0fillorderoutfillorderout0flowfinalnode1forknode1in0ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0sendinvoiceinsendinvoicein0shiporderinshiporderin0->STATE13), STATE21 = (closeorderoutcloseorderout0flowfinalnode1in0->STATE15 | invoicecentralbufferinsendinvoiceoutsendinvoiceout0->STATE38 | closeorderoutcloseorderout0flowfinalnode1in0invoicecentralbufferinsendinvoiceoutsendinvoiceout0->STATE26 | receiveorderoutreceiveorderout0->STATE18 | closeorderoutcloseorderout0flowfinalnode1in0receiveorderoutreceiveorderout0->STATE12 | invoicecentralbufferinreceiveorderoutreceiveorderout0sendinvoiceoutsendinvoiceout0->STATE28 | closeorderoutcloseorderout0flowfinalnode1in0invoicecentralbufferinreceiveorderoutreceiveorderout0sendinvoiceoutsendinvoiceout0->STATE24 | fillorderinfillorderin0receiveorderoutreceiveorderout0->STATE30 | closeorderoutcloseorderout0fillorderinfillorderin0flowfinalnode1in0receiveorderoutreceiveorderout0->STATE29 | fillorderinfillorderin0invoicecentralbufferinreceiveorderoutreceiveorderout0sendinvoiceoutsendinvoiceout0->STATE32 | closeorderoutcloseorderout0fillorderinfillorderin0flowfinalnode1in0invoicecentralbufferinreceiveorderoutreceiveorderout0sendinvoiceoutsendinvoiceout0->STATE31 | ordercancelrequestinordercancelrequestin0->STATE23 | closeorderoutcloseorderout0flowfinalnode1in0ordercancelrequestinordercancelrequestin0->STATE17 | invoicecentralbufferinordercancelrequestinordercancelrequestin0sendinvoiceoutsendinvoiceout0->STATE39 | closeorderoutcloseorderout0flowfinalnode1in0invoicecentralbufferinordercancelrequestinordercancelrequestin0sendinvoiceoutsendinvoiceout0->STATE27 | ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0->STATE19 | closeorderoutcloseorderout0flowfinalnode1in0ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0->STATE13 | invoicecentralbufferinordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0sendinvoiceoutsendinvoiceout0->STATE33 | closeorderoutcloseorderout0flowfinalnode1in0invoicecentralbufferinordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0sendinvoiceoutsendinvoiceout0->STATE25 | fillorderinfillorderin0ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0->STATE35 | closeorderoutcloseorderout0fillorderinfillorderin0flowfinalnode1in0ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0->STATE34 | fillorderinfillorderin0invoicecentralbufferinordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0sendinvoiceoutsendinvoiceout0->STATE37 | closeorderoutcloseorderout0fillorderinfillorderin0flowfinalnode1in0invoicecentralbufferinordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0sendinvoiceoutsendinvoiceout0->STATE36), STATE22 = (closeorderoutcloseorderout0flowfinalnode1in0->STATE16 | fillorderoutfillorderout0forknode1sendinvoiceinsendinvoicein0shiporderinshiporderin0->STATE23 | closeorderoutcloseorderout0fillorderoutfillorderout0flowfinalnode1forknode1in0sendinvoiceinsendinvoicein0shiporderinshiporderin0->STATE17 | receiveorderoutreceiveorderout0->STATE9 | closeorderoutcloseorderout0flowfinalnode1in0receiveorderoutreceiveorderout0->STATE8 | fillorderoutfillorderout0forknode1receiveorderoutreceiveorderout0sendinvoiceinsendinvoicein0shiporderinshiporderin0->STATE19 | closeorderoutcloseorderout0fillorderoutfillorderout0flowfinalnode1forknode1in0receiveorderoutreceiveorderout0sendinvoiceinsendinvoicein0shiporderinshiporderin0->STATE13), STATE23 = (closeorderoutcloseorderout0flowfinalnode1in0->STATE17 | invoicecentralbufferinsendinvoiceoutsendinvoiceout0->STATE39 | closeorderoutcloseorderout0flowfinalnode1in0invoicecentralbufferinsendinvoiceoutsendinvoiceout0->STATE27 | receiveorderoutreceiveorderout0->STATE19 | closeorderoutcloseorderout0flowfinalnode1in0receiveorderoutreceiveorderout0->STATE13 | invoicecentralbufferinreceiveorderoutreceiveorderout0sendinvoiceoutsendinvoiceout0->STATE33 | closeorderoutcloseorderout0flowfinalnode1in0invoicecentralbufferinreceiveorderoutreceiveorderout0sendinvoiceoutsendinvoiceout0->STATE25 | fillorderinfillorderin0receiveorderoutreceiveorderout0->STATE35 | closeorderoutcloseorderout0fillorderinfillorderin0flowfinalnode1in0receiveorderoutreceiveorderout0->STATE34 | fillorderinfillorderin0invoicecentralbufferinreceiveorderoutreceiveorderout0sendinvoiceoutsendinvoiceout0->STATE37 | closeorderoutcloseorderout0fillorderinfillorderin0flowfinalnode1in0invoicecentralbufferinreceiveorderoutreceiveorderout0sendinvoiceoutsendinvoiceout0->STATE36), STATE24 = (invoicecentralbufferoutmakepaymentinmakepaymentin0->STATE40 | ordercancelrequestinordercancelrequestin0->STATE25 | invoicecentralbufferoutmakepaymentinmakepaymentin0ordercancelrequestinordercancelrequestin0->STATE41 | initialnode1outreceiveorderinreceiveorderin0->STATE26 | initialnode1invoicecentralbufferoutmakepaymentinmakepaymentin0outreceiveorderinreceiveorderin0->STATE42 | initialnode1ordercancelrequestinordercancelrequestin0outreceiveorderinreceiveorderin0->STATE27 | initialnode1invoicecentralbufferoutmakepaymentinmakepaymentin0ordercancelrequestinordercancelrequestin0outreceiveorderinreceiveorderin0->STATE43), STATE25 = (invoicecentralbufferoutmakepaymentinmakepaymentin0->STATE41 | initialnode1outreceiveorderinreceiveorderin0->STATE27 | initialnode1invoicecentralbufferoutmakepaymentinmakepaymentin0outreceiveorderinreceiveorderin0->STATE43), STATE26 = (invoicecentralbufferoutmakepaymentinmakepaymentin0->STATE42 | receiveorderoutreceiveorderout0->STATE24 | closeorderincloseorderin0receiveorderoutreceiveorderout0->STATE28 | invoicecentralbufferoutmakepaymentinmakepaymentin0receiveorderoutreceiveorderout0->STATE40 | closeorderincloseorderin0invoicecentralbufferoutmakepaymentinmakepaymentin0receiveorderoutreceiveorderout0->STATE44 | fillorderinfillorderin0receiveorderoutreceiveorderout0->STATE31 | closeorderincloseorderin0fillorderinfillorderin0receiveorderoutreceiveorderout0->STATE32 | fillorderinfillorderin0invoicecentralbufferoutmakepaymentinmakepaymentin0receiveorderoutreceiveorderout0->STATE45 | closeorderincloseorderin0fillorderinfillorderin0invoicecentralbufferoutmakepaymentinmakepaymentin0receiveorderoutreceiveorderout0->STATE46 | ordercancelrequestinordercancelrequestin0->STATE27 | invoicecentralbufferoutmakepaymentinmakepaymentin0ordercancelrequestinordercancelrequestin0->STATE43 | ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0->STATE25 | closeorderincloseorderin0ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0->STATE33 | invoicecentralbufferoutmakepaymentinmakepaymentin0ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0->STATE41 | closeorderincloseorderin0invoicecentralbufferoutmakepaymentinmakepaymentin0ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0->STATE47 | fillorderinfillorderin0ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0->STATE36 | closeorderincloseorderin0fillorderinfillorderin0ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0->STATE37 | fillorderinfillorderin0invoicecentralbufferoutmakepaymentinmakepaymentin0ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0->STATE48 | closeorderincloseorderin0fillorderinfillorderin0invoicecentralbufferoutmakepaymentinmakepaymentin0ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0->STATE49), STATE27 = (invoicecentralbufferoutmakepaymentinmakepaymentin0->STATE43 | receiveorderoutreceiveorderout0->STATE25 | closeorderincloseorderin0receiveorderoutreceiveorderout0->STATE33 | invoicecentralbufferoutmakepaymentinmakepaymentin0receiveorderoutreceiveorderout0->STATE41 | closeorderincloseorderin0invoicecentralbufferoutmakepaymentinmakepaymentin0receiveorderoutreceiveorderout0->STATE47 | fillorderinfillorderin0receiveorderoutreceiveorderout0->STATE36 | closeorderincloseorderin0fillorderinfillorderin0receiveorderoutreceiveorderout0->STATE37 | fillorderinfillorderin0invoicecentralbufferoutmakepaymentinmakepaymentin0receiveorderoutreceiveorderout0->STATE48 | closeorderincloseorderin0fillorderinfillorderin0invoicecentralbufferoutmakepaymentinmakepaymentin0receiveorderoutreceiveorderout0->STATE49), STATE28 = (closeorderoutcloseorderout0flowfinalnode1in0->STATE24 | invoicecentralbufferoutmakepaymentinmakepaymentin0->STATE44 | closeorderoutcloseorderout0flowfinalnode1in0invoicecentralbufferoutmakepaymentinmakepaymentin0->STATE40 | ordercancelrequestinordercancelrequestin0->STATE33 | closeorderoutcloseorderout0flowfinalnode1in0ordercancelrequestinordercancelrequestin0->STATE25 | invoicecentralbufferoutmakepaymentinmakepaymentin0ordercancelrequestinordercancelrequestin0->STATE47 | closeorderoutcloseorderout0flowfinalnode1in0invoicecentralbufferoutmakepaymentinmakepaymentin0ordercancelrequestinordercancelrequestin0->STATE41 | initialnode1outreceiveorderinreceiveorderin0->STATE38 | closeorderoutcloseorderout0flowfinalnode1in0initialnode1outreceiveorderinreceiveorderin0->STATE26 | initialnode1invoicecentralbufferoutmakepaymentinmakepaymentin0outreceiveorderinreceiveorderin0->STATE50 | closeorderoutcloseorderout0flowfinalnode1in0initialnode1invoicecentralbufferoutmakepaymentinmakepaymentin0outreceiveorderinreceiveorderin0->STATE42 | initialnode1ordercancelrequestinordercancelrequestin0outreceiveorderinreceiveorderin0->STATE39 | closeorderoutcloseorderout0flowfinalnode1in0initialnode1ordercancelrequestinordercancelrequestin0outreceiveorderinreceiveorderin0->STATE27 | initialnode1invoicecentralbufferoutmakepaymentinmakepaymentin0ordercancelrequestinordercancelrequestin0outreceiveorderinreceiveorderin0->STATE51 | closeorderoutcloseorderout0flowfinalnode1in0initialnode1invoicecentralbufferoutmakepaymentinmakepaymentin0ordercancelrequestinordercancelrequestin0outreceiveorderinreceiveorderin0->STATE43), STATE29 = (invoicecentralbufferinsendinvoiceoutsendinvoiceout0->STATE31 | ordercancelrequestinordercancelrequestin0->STATE34 | invoicecentralbufferinordercancelrequestinordercancelrequestin0sendinvoiceoutsendinvoiceout0->STATE36 | initialnode1outreceiveorderinreceiveorderin0->STATE52 | initialnode1invoicecentralbufferinoutreceiveorderinreceiveorderin0sendinvoiceoutsendinvoiceout0->STATE53 | initialnode1ordercancelrequestinordercancelrequestin0outreceiveorderinreceiveorderin0->STATE54 | initialnode1invoicecentralbufferinordercancelrequestinordercancelrequestin0outreceiveorderinreceiveorderin0sendinvoiceoutsendinvoiceout0->STATE55), STATE3 = (receiveorderoutreceiveorderout0->STATE1 | closeorderincloseorderin0receiveorderoutreceiveorderout0->STATE7 | fillorderinfillorderin0receiveorderoutreceiveorderout0->STATE8 | closeorderincloseorderin0fillorderinfillorderin0receiveorderoutreceiveorderout0->STATE9), STATE30 = (closeorderoutcloseorderout0flowfinalnode1in0->STATE29 | invoicecentralbufferinsendinvoiceoutsendinvoiceout0->STATE32 | closeorderoutcloseorderout0flowfinalnode1in0invoicecentralbufferinsendinvoiceoutsendinvoiceout0->STATE31 | ordercancelrequestinordercancelrequestin0->STATE35 | closeorderoutcloseorderout0flowfinalnode1in0ordercancelrequestinordercancelrequestin0->STATE34 | invoicecentralbufferinordercancelrequestinordercancelrequestin0sendinvoiceoutsendinvoiceout0->STATE37 | closeorderoutcloseorderout0flowfinalnode1in0invoicecentralbufferinordercancelrequestinordercancelrequestin0sendinvoiceoutsendinvoiceout0->STATE36 | initialnode1outreceiveorderinreceiveorderin0->STATE56 | closeorderoutcloseorderout0flowfinalnode1in0initialnode1outreceiveorderinreceiveorderin0->STATE52 | initialnode1invoicecentralbufferinoutreceiveorderinreceiveorderin0sendinvoiceoutsendinvoiceout0->STATE57 | closeorderoutcloseorderout0flowfinalnode1in0initialnode1invoicecentralbufferinoutreceiveorderinreceiveorderin0sendinvoiceoutsendinvoiceout0->STATE53 | initialnode1ordercancelrequestinordercancelrequestin0outreceiveorderinreceiveorderin0->STATE58 | closeorderoutcloseorderout0flowfinalnode1in0initialnode1ordercancelrequestinordercancelrequestin0outreceiveorderinreceiveorderin0->STATE54 | initialnode1invoicecentralbufferinordercancelrequestinordercancelrequestin0outreceiveorderinreceiveorderin0sendinvoiceoutsendinvoiceout0->STATE59 | closeorderoutcloseorderout0flowfinalnode1in0initialnode1invoicecentralbufferinordercancelrequestinordercancelrequestin0outreceiveorderinreceiveorderin0sendinvoiceoutsendinvoiceout0->STATE55), STATE31 = (invoicecentralbufferoutmakepaymentinmakepaymentin0->STATE45 | ordercancelrequestinordercancelrequestin0->STATE36 | invoicecentralbufferoutmakepaymentinmakepaymentin0ordercancelrequestinordercancelrequestin0->STATE48 | initialnode1outreceiveorderinreceiveorderin0->STATE53 | initialnode1invoicecentralbufferoutmakepaymentinmakepaymentin0outreceiveorderinreceiveorderin0->STATE60 | initialnode1ordercancelrequestinordercancelrequestin0outreceiveorderinreceiveorderin0->STATE55 | initialnode1invoicecentralbufferoutmakepaymentinmakepaymentin0ordercancelrequestinordercancelrequestin0outreceiveorderinreceiveorderin0->STATE61), STATE32 = (closeorderoutcloseorderout0flowfinalnode1in0->STATE31 | invoicecentralbufferoutmakepaymentinmakepaymentin0->STATE46 | closeorderoutcloseorderout0flowfinalnode1in0invoicecentralbufferoutmakepaymentinmakepaymentin0->STATE45 | ordercancelrequestinordercancelrequestin0->STATE37 | closeorderoutcloseorderout0flowfinalnode1in0ordercancelrequestinordercancelrequestin0->STATE36 | invoicecentralbufferoutmakepaymentinmakepaymentin0ordercancelrequestinordercancelrequestin0->STATE49 | closeorderoutcloseorderout0flowfinalnode1in0invoicecentralbufferoutmakepaymentinmakepaymentin0ordercancelrequestinordercancelrequestin0->STATE48 | initialnode1outreceiveorderinreceiveorderin0->STATE57 | closeorderoutcloseorderout0flowfinalnode1in0initialnode1outreceiveorderinreceiveorderin0->STATE53 | initialnode1invoicecentralbufferoutmakepaymentinmakepaymentin0outreceiveorderinreceiveorderin0->STATE62 | closeorderoutcloseorderout0flowfinalnode1in0initialnode1invoicecentralbufferoutmakepaymentinmakepaymentin0outreceiveorderinreceiveorderin0->STATE60 | initialnode1ordercancelrequestinordercancelrequestin0outreceiveorderinreceiveorderin0->STATE59 | closeorderoutcloseorderout0flowfinalnode1in0initialnode1ordercancelrequestinordercancelrequestin0outreceiveorderinreceiveorderin0->STATE55 | initialnode1invoicecentralbufferoutmakepaymentinmakepaymentin0ordercancelrequestinordercancelrequestin0outreceiveorderinreceiveorderin0->STATE63 | closeorderoutcloseorderout0flowfinalnode1in0initialnode1invoicecentralbufferoutmakepaymentinmakepaymentin0ordercancelrequestinordercancelrequestin0outreceiveorderinreceiveorderin0->STATE61), STATE33 = (closeorderoutcloseorderout0flowfinalnode1in0->STATE25 | invoicecentralbufferoutmakepaymentinmakepaymentin0->STATE47 | closeorderoutcloseorderout0flowfinalnode1in0invoicecentralbufferoutmakepaymentinmakepaymentin0->STATE41 | initialnode1outreceiveorderinreceiveorderin0->STATE39 | closeorderoutcloseorderout0flowfinalnode1in0initialnode1outreceiveorderinreceiveorderin0->STATE27 | initialnode1invoicecentralbufferoutmakepaymentinmakepaymentin0outreceiveorderinreceiveorderin0->STATE51 | closeorderoutcloseorderout0flowfinalnode1in0initialnode1invoicecentralbufferoutmakepaymentinmakepaymentin0outreceiveorderinreceiveorderin0->STATE43), STATE34 = (invoicecentralbufferinsendinvoiceoutsendinvoiceout0->STATE36 | initialnode1outreceiveorderinreceiveorderin0->STATE54 | initialnode1invoicecentralbufferinoutreceiveorderinreceiveorderin0sendinvoiceoutsendinvoiceout0->STATE55), STATE35 = (closeorderoutcloseorderout0flowfinalnode1in0->STATE34 | invoicecentralbufferinsendinvoiceoutsendinvoiceout0->STATE37 | closeorderoutcloseorderout0flowfinalnode1in0invoicecentralbufferinsendinvoiceoutsendinvoiceout0->STATE36 | initialnode1outreceiveorderinreceiveorderin0->STATE58 | closeorderoutcloseorderout0flowfinalnode1in0initialnode1outreceiveorderinreceiveorderin0->STATE54 | initialnode1invoicecentralbufferinoutreceiveorderinreceiveorderin0sendinvoiceoutsendinvoiceout0->STATE59 | closeorderoutcloseorderout0flowfinalnode1in0initialnode1invoicecentralbufferinoutreceiveorderinreceiveorderin0sendinvoiceoutsendinvoiceout0->STATE55), STATE36 = (invoicecentralbufferoutmakepaymentinmakepaymentin0->STATE48 | initialnode1outreceiveorderinreceiveorderin0->STATE55 | initialnode1invoicecentralbufferoutmakepaymentinmakepaymentin0outreceiveorderinreceiveorderin0->STATE61), STATE37 = (closeorderoutcloseorderout0flowfinalnode1in0->STATE36 | invoicecentralbufferoutmakepaymentinmakepaymentin0->STATE49 | closeorderoutcloseorderout0flowfinalnode1in0invoicecentralbufferoutmakepaymentinmakepaymentin0->STATE48 | initialnode1outreceiveorderinreceiveorderin0->STATE59 | closeorderoutcloseorderout0flowfinalnode1in0initialnode1outreceiveorderinreceiveorderin0->STATE55 | initialnode1invoicecentralbufferoutmakepaymentinmakepaymentin0outreceiveorderinreceiveorderin0->STATE63 | closeorderoutcloseorderout0flowfinalnode1in0initialnode1invoicecentralbufferoutmakepaymentinmakepaymentin0outreceiveorderinreceiveorderin0->STATE61), STATE38 = (closeorderoutcloseorderout0flowfinalnode1in0->STATE26 | invoicecentralbufferoutmakepaymentinmakepaymentin0->STATE50 | closeorderoutcloseorderout0flowfinalnode1in0invoicecentralbufferoutmakepaymentinmakepaymentin0->STATE42 | receiveorderoutreceiveorderout0->STATE28 | closeorderoutcloseorderout0flowfinalnode1in0receiveorderoutreceiveorderout0->STATE24 | invoicecentralbufferoutmakepaymentinmakepaymentin0receiveorderoutreceiveorderout0->STATE44 | closeorderoutcloseorderout0flowfinalnode1in0invoicecentralbufferoutmakepaymentinmakepaymentin0receiveorderoutreceiveorderout0->STATE40 | fillorderinfillorderin0receiveorderoutreceiveorderout0->STATE32 | closeorderoutcloseorderout0fillorderinfillorderin0flowfinalnode1in0receiveorderoutreceiveorderout0->STATE31 | fillorderinfillorderin0invoicecentralbufferoutmakepaymentinmakepaymentin0receiveorderoutreceiveorderout0->STATE46 | closeorderoutcloseorderout0fillorderinfillorderin0flowfinalnode1in0invoicecentralbufferoutmakepaymentinmakepaymentin0receiveorderoutreceiveorderout0->STATE45 | ordercancelrequestinordercancelrequestin0->STATE39 | closeorderoutcloseorderout0flowfinalnode1in0ordercancelrequestinordercancelrequestin0->STATE27 | invoicecentralbufferoutmakepaymentinmakepaymentin0ordercancelrequestinordercancelrequestin0->STATE51 | closeorderoutcloseorderout0flowfinalnode1in0invoicecentralbufferoutmakepaymentinmakepaymentin0ordercancelrequestinordercancelrequestin0->STATE43 | ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0->STATE33 | closeorderoutcloseorderout0flowfinalnode1in0ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0->STATE25 | invoicecentralbufferoutmakepaymentinmakepaymentin0ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0->STATE47 | closeorderoutcloseorderout0flowfinalnode1in0invoicecentralbufferoutmakepaymentinmakepaymentin0ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0->STATE41 | fillorderinfillorderin0ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0->STATE37 | closeorderoutcloseorderout0fillorderinfillorderin0flowfinalnode1in0ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0->STATE36 | fillorderinfillorderin0invoicecentralbufferoutmakepaymentinmakepaymentin0ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0->STATE49 | closeorderoutcloseorderout0fillorderinfillorderin0flowfinalnode1in0invoicecentralbufferoutmakepaymentinmakepaymentin0ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0->STATE48), STATE39 = (closeorderoutcloseorderout0flowfinalnode1in0->STATE27 | invoicecentralbufferoutmakepaymentinmakepaymentin0->STATE51 | closeorderoutcloseorderout0flowfinalnode1in0invoicecentralbufferoutmakepaymentinmakepaymentin0->STATE43 | receiveorderoutreceiveorderout0->STATE33 | closeorderoutcloseorderout0flowfinalnode1in0receiveorderoutreceiveorderout0->STATE25 | invoicecentralbufferoutmakepaymentinmakepaymentin0receiveorderoutreceiveorderout0->STATE47 | closeorderoutcloseorderout0flowfinalnode1in0invoicecentralbufferoutmakepaymentinmakepaymentin0receiveorderoutreceiveorderout0->STATE41 | fillorderinfillorderin0receiveorderoutreceiveorderout0->STATE37 | closeorderoutcloseorderout0fillorderinfillorderin0flowfinalnode1in0receiveorderoutreceiveorderout0->STATE36 | fillorderinfillorderin0invoicecentralbufferoutmakepaymentinmakepaymentin0receiveorderoutreceiveorderout0->STATE49 | closeorderoutcloseorderout0fillorderinfillorderin0flowfinalnode1in0invoicecentralbufferoutmakepaymentinmakepaymentin0receiveorderoutreceiveorderout0->STATE48), STATE4 = (closeorderoutcloseorderout0flowfinalnode1in0->STATE0 | ordercancelrequestinordercancelrequestin0->STATE7 | closeorderoutcloseorderout0flowfinalnode1in0ordercancelrequestinordercancelrequestin0->STATE1 | initialnode1outreceiveorderinreceiveorderin0->STATE10 | closeorderoutcloseorderout0flowfinalnode1in0initialnode1outreceiveorderinreceiveorderin0->STATE2 | initialnode1ordercancelrequestinordercancelrequestin0outreceiveorderinreceiveorderin0->STATE11 | closeorderoutcloseorderout0flowfinalnode1in0initialnode1ordercancelrequestinordercancelrequestin0outreceiveorderinreceiveorderin0->STATE3), STATE40 = (acceptpaymentinacceptpaymentin0makepaymentoutmakepaymentout0->STATE64 | ordercancelrequestinordercancelrequestin0->STATE41 | acceptpaymentinacceptpaymentin0makepaymentoutmakepaymentout0ordercancelrequestinordercancelrequestin0->STATE65 | initialnode1outreceiveorderinreceiveorderin0->STATE42 | acceptpaymentinacceptpaymentin0initialnode1makepaymentoutmakepaymentout0outreceiveorderinreceiveorderin0->STATE66 | initialnode1ordercancelrequestinordercancelrequestin0outreceiveorderinreceiveorderin0->STATE43 | acceptpaymentinacceptpaymentin0initialnode1makepaymentoutmakepaymentout0ordercancelrequestinordercancelrequestin0outreceiveorderinreceiveorderin0->STATE67), STATE41 = (acceptpaymentinacceptpaymentin0makepaymentoutmakepaymentout0->STATE65 | initialnode1outreceiveorderinreceiveorderin0->STATE43 | acceptpaymentinacceptpaymentin0initialnode1makepaymentoutmakepaymentout0outreceiveorderinreceiveorderin0->STATE67), STATE42 = (acceptpaymentinacceptpaymentin0makepaymentoutmakepaymentout0->STATE66 | receiveorderoutreceiveorderout0->STATE40 | closeorderincloseorderin0receiveorderoutreceiveorderout0->STATE44 | acceptpaymentinacceptpaymentin0makepaymentoutmakepaymentout0receiveorderoutreceiveorderout0->STATE64 | acceptpaymentinacceptpaymentin0closeorderincloseorderin0makepaymentoutmakepaymentout0receiveorderoutreceiveorderout0->STATE68 | fillorderinfillorderin0receiveorderoutreceiveorderout0->STATE45 | closeorderincloseorderin0fillorderinfillorderin0receiveorderoutreceiveorderout0->STATE46 | acceptpaymentinacceptpaymentin0fillorderinfillorderin0makepaymentoutmakepaymentout0receiveorderoutreceiveorderout0->STATE69 | acceptpaymentinacceptpaymentin0closeorderincloseorderin0fillorderinfillorderin0makepaymentoutmakepaymentout0receiveorderoutreceiveorderout0->STATE70 | ordercancelrequestinordercancelrequestin0->STATE43 | acceptpaymentinacceptpaymentin0makepaymentoutmakepaymentout0ordercancelrequestinordercancelrequestin0->STATE67 | ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0->STATE41 | closeorderincloseorderin0ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0->STATE47 | acceptpaymentinacceptpaymentin0makepaymentoutmakepaymentout0ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0->STATE65 | acceptpaymentinacceptpaymentin0closeorderincloseorderin0makepaymentoutmakepaymentout0ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0->STATE71 | fillorderinfillorderin0ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0->STATE48 | closeorderincloseorderin0fillorderinfillorderin0ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0->STATE49 | acceptpaymentinacceptpaymentin0fillorderinfillorderin0makepaymentoutmakepaymentout0ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0->STATE72 | acceptpaymentinacceptpaymentin0closeorderincloseorderin0fillorderinfillorderin0makepaymentoutmakepaymentout0ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0->STATE73), STATE43 = (acceptpaymentinacceptpaymentin0makepaymentoutmakepaymentout0->STATE67 | receiveorderoutreceiveorderout0->STATE41 | closeorderincloseorderin0receiveorderoutreceiveorderout0->STATE47 | acceptpaymentinacceptpaymentin0makepaymentoutmakepaymentout0receiveorderoutreceiveorderout0->STATE65 | acceptpaymentinacceptpaymentin0closeorderincloseorderin0makepaymentoutmakepaymentout0receiveorderoutreceiveorderout0->STATE71 | fillorderinfillorderin0receiveorderoutreceiveorderout0->STATE48 | closeorderincloseorderin0fillorderinfillorderin0receiveorderoutreceiveorderout0->STATE49 | acceptpaymentinacceptpaymentin0fillorderinfillorderin0makepaymentoutmakepaymentout0receiveorderoutreceiveorderout0->STATE72 | acceptpaymentinacceptpaymentin0closeorderincloseorderin0fillorderinfillorderin0makepaymentoutmakepaymentout0receiveorderoutreceiveorderout0->STATE73), STATE44 = (closeorderoutcloseorderout0flowfinalnode1in0->STATE40 | acceptpaymentinacceptpaymentin0makepaymentoutmakepaymentout0->STATE68 | acceptpaymentinacceptpaymentin0closeorderoutcloseorderout0flowfinalnode1in0makepaymentoutmakepaymentout0->STATE64 | ordercancelrequestinordercancelrequestin0->STATE47 | closeorderoutcloseorderout0flowfinalnode1in0ordercancelrequestinordercancelrequestin0->STATE41 | acceptpaymentinacceptpaymentin0makepaymentoutmakepaymentout0ordercancelrequestinordercancelrequestin0->STATE71 | acceptpaymentinacceptpaymentin0closeorderoutcloseorderout0flowfinalnode1in0makepaymentoutmakepaymentout0ordercancelrequestinordercancelrequestin0->STATE65 | initialnode1outreceiveorderinreceiveorderin0->STATE50 | closeorderoutcloseorderout0flowfinalnode1in0initialnode1outreceiveorderinreceiveorderin0->STATE42 | acceptpaymentinacceptpaymentin0initialnode1makepaymentoutmakepaymentout0outreceiveorderinreceiveorderin0->STATE74 | acceptpaymentinacceptpaymentin0closeorderoutcloseorderout0flowfinalnode1in0initialnode1makepaymentoutmakepaymentout0outreceiveorderinreceiveorderin0->STATE66 | initialnode1ordercancelrequestinordercancelrequestin0outreceiveorderinreceiveorderin0->STATE51 | closeorderoutcloseorderout0flowfinalnode1in0initialnode1ordercancelrequestinordercancelrequestin0outreceiveorderinreceiveorderin0->STATE43 | acceptpaymentinacceptpaymentin0initialnode1makepaymentoutmakepaymentout0ordercancelrequestinordercancelrequestin0outreceiveorderinreceiveorderin0->STATE75 | acceptpaymentinacceptpaymentin0closeorderoutcloseorderout0flowfinalnode1in0initialnode1makepaymentoutmakepaymentout0ordercancelrequestinordercancelrequestin0outreceiveorderinreceiveorderin0->STATE67), STATE45 = (acceptpaymentinacceptpaymentin0makepaymentoutmakepaymentout0->STATE69 | ordercancelrequestinordercancelrequestin0->STATE48 | acceptpaymentinacceptpaymentin0makepaymentoutmakepaymentout0ordercancelrequestinordercancelrequestin0->STATE72 | initialnode1outreceiveorderinreceiveorderin0->STATE60 | acceptpaymentinacceptpaymentin0initialnode1makepaymentoutmakepaymentout0outreceiveorderinreceiveorderin0->STATE76 | initialnode1ordercancelrequestinordercancelrequestin0outreceiveorderinreceiveorderin0->STATE61 | acceptpaymentinacceptpaymentin0initialnode1makepaymentoutmakepaymentout0ordercancelrequestinordercancelrequestin0outreceiveorderinreceiveorderin0->STATE77), STATE46 = (closeorderoutcloseorderout0flowfinalnode1in0->STATE45 | acceptpaymentinacceptpaymentin0makepaymentoutmakepaymentout0->STATE70 | acceptpaymentinacceptpaymentin0closeorderoutcloseorderout0flowfinalnode1in0makepaymentoutmakepaymentout0->STATE69 | ordercancelrequestinordercancelrequestin0->STATE49 | closeorderoutcloseorderout0flowfinalnode1in0ordercancelrequestinordercancelrequestin0->STATE48 | acceptpaymentinacceptpaymentin0makepaymentoutmakepaymentout0ordercancelrequestinordercancelrequestin0->STATE73 | acceptpaymentinacceptpaymentin0closeorderoutcloseorderout0flowfinalnode1in0makepaymentoutmakepaymentout0ordercancelrequestinordercancelrequestin0->STATE72 | initialnode1outreceiveorderinreceiveorderin0->STATE62 | closeorderoutcloseorderout0flowfinalnode1in0initialnode1outreceiveorderinreceiveorderin0->STATE60 | acceptpaymentinacceptpaymentin0initialnode1makepaymentoutmakepaymentout0outreceiveorderinreceiveorderin0->STATE78 | acceptpaymentinacceptpaymentin0closeorderoutcloseorderout0flowfinalnode1in0initialnode1makepaymentoutmakepaymentout0outreceiveorderinreceiveorderin0->STATE76 | initialnode1ordercancelrequestinordercancelrequestin0outreceiveorderinreceiveorderin0->STATE63 | closeorderoutcloseorderout0flowfinalnode1in0initialnode1ordercancelrequestinordercancelrequestin0outreceiveorderinreceiveorderin0->STATE61 | acceptpaymentinacceptpaymentin0initialnode1makepaymentoutmakepaymentout0ordercancelrequestinordercancelrequestin0outreceiveorderinreceiveorderin0->STATE79 | acceptpaymentinacceptpaymentin0closeorderoutcloseorderout0flowfinalnode1in0initialnode1makepaymentoutmakepaymentout0ordercancelrequestinordercancelrequestin0outreceiveorderinreceiveorderin0->STATE77), STATE47 = (closeorderoutcloseorderout0flowfinalnode1in0->STATE41 | acceptpaymentinacceptpaymentin0makepaymentoutmakepaymentout0->STATE71 | acceptpaymentinacceptpaymentin0closeorderoutcloseorderout0flowfinalnode1in0makepaymentoutmakepaymentout0->STATE65 | initialnode1outreceiveorderinreceiveorderin0->STATE51 | closeorderoutcloseorderout0flowfinalnode1in0initialnode1outreceiveorderinreceiveorderin0->STATE43 | acceptpaymentinacceptpaymentin0initialnode1makepaymentoutmakepaymentout0outreceiveorderinreceiveorderin0->STATE75 | acceptpaymentinacceptpaymentin0closeorderoutcloseorderout0flowfinalnode1in0initialnode1makepaymentoutmakepaymentout0outreceiveorderinreceiveorderin0->STATE67), STATE48 = (acceptpaymentinacceptpaymentin0makepaymentoutmakepaymentout0->STATE72 | initialnode1outreceiveorderinreceiveorderin0->STATE61 | acceptpaymentinacceptpaymentin0initialnode1makepaymentoutmakepaymentout0outreceiveorderinreceiveorderin0->STATE77), STATE49 = (closeorderoutcloseorderout0flowfinalnode1in0->STATE48 | acceptpaymentinacceptpaymentin0makepaymentoutmakepaymentout0->STATE73 | acceptpaymentinacceptpaymentin0closeorderoutcloseorderout0flowfinalnode1in0makepaymentoutmakepaymentout0->STATE72 | initialnode1outreceiveorderinreceiveorderin0->STATE63 | closeorderoutcloseorderout0flowfinalnode1in0initialnode1outreceiveorderinreceiveorderin0->STATE61 | acceptpaymentinacceptpaymentin0initialnode1makepaymentoutmakepaymentout0outreceiveorderinreceiveorderin0->STATE79 | acceptpaymentinacceptpaymentin0closeorderoutcloseorderout0flowfinalnode1in0initialnode1makepaymentoutmakepaymentout0outreceiveorderinreceiveorderin0->STATE77), STATE5 = (fillorderoutfillorderout0forknode1sendinvoiceinsendinvoicein0shiporderinshiporderin0->STATE12 | ordercancelrequestinordercancelrequestin0->STATE8 | fillorderoutfillorderout0forknode1ordercancelrequestinordercancelrequestin0sendinvoiceinsendinvoicein0shiporderinshiporderin0->STATE13 | initialnode1outreceiveorderinreceiveorderin0->STATE14 | fillorderoutfillorderout0forknode1initialnode1outreceiveorderinreceiveorderin0sendinvoiceinsendinvoicein0shiporderinshiporderin0->STATE15 | initialnode1ordercancelrequestinordercancelrequestin0outreceiveorderinreceiveorderin0->STATE16 | fillorderoutfillorderout0forknode1initialnode1ordercancelrequestinordercancelrequestin0outreceiveorderinreceiveorderin0sendinvoiceinsendinvoicein0shiporderinshiporderin0->STATE17), STATE50 = (closeorderoutcloseorderout0flowfinalnode1in0->STATE42 | acceptpaymentinacceptpaymentin0makepaymentoutmakepaymentout0->STATE74 | acceptpaymentinacceptpaymentin0closeorderoutcloseorderout0flowfinalnode1in0makepaymentoutmakepaymentout0->STATE66 | receiveorderoutreceiveorderout0->STATE44 | closeorderoutcloseorderout0flowfinalnode1in0receiveorderoutreceiveorderout0->STATE40 | acceptpaymentinacceptpaymentin0makepaymentoutmakepaymentout0receiveorderoutreceiveorderout0->STATE68 | acceptpaymentinacceptpaymentin0closeorderoutcloseorderout0flowfinalnode1in0makepaymentoutmakepaymentout0receiveorderoutreceiveorderout0->STATE64 | fillorderinfillorderin0receiveorderoutreceiveorderout0->STATE46 | closeorderoutcloseorderout0fillorderinfillorderin0flowfinalnode1in0receiveorderoutreceiveorderout0->STATE45 | acceptpaymentinacceptpaymentin0fillorderinfillorderin0makepaymentoutmakepaymentout0receiveorderoutreceiveorderout0->STATE70 | acceptpaymentinacceptpaymentin0closeorderoutcloseorderout0fillorderinfillorderin0flowfinalnode1in0makepaymentoutmakepaymentout0receiveorderoutreceiveorderout0->STATE69 | ordercancelrequestinordercancelrequestin0->STATE51 | closeorderoutcloseorderout0flowfinalnode1in0ordercancelrequestinordercancelrequestin0->STATE43 | acceptpaymentinacceptpaymentin0makepaymentoutmakepaymentout0ordercancelrequestinordercancelrequestin0->STATE75 | acceptpaymentinacceptpaymentin0closeorderoutcloseorderout0flowfinalnode1in0makepaymentoutmakepaymentout0ordercancelrequestinordercancelrequestin0->STATE67 | ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0->STATE47 | closeorderoutcloseorderout0flowfinalnode1in0ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0->STATE41 | acceptpaymentinacceptpaymentin0makepaymentoutmakepaymentout0ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0->STATE71 | acceptpaymentinacceptpaymentin0closeorderoutcloseorderout0flowfinalnode1in0makepaymentoutmakepaymentout0ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0->STATE65 | fillorderinfillorderin0ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0->STATE49 | closeorderoutcloseorderout0fillorderinfillorderin0flowfinalnode1in0ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0->STATE48 | acceptpaymentinacceptpaymentin0fillorderinfillorderin0makepaymentoutmakepaymentout0ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0->STATE73 | acceptpaymentinacceptpaymentin0closeorderoutcloseorderout0fillorderinfillorderin0flowfinalnode1in0makepaymentoutmakepaymentout0ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0->STATE72), STATE51 = (closeorderoutcloseorderout0flowfinalnode1in0->STATE43 | acceptpaymentinacceptpaymentin0makepaymentoutmakepaymentout0->STATE75 | acceptpaymentinacceptpaymentin0closeorderoutcloseorderout0flowfinalnode1in0makepaymentoutmakepaymentout0->STATE67 | receiveorderoutreceiveorderout0->STATE47 | closeorderoutcloseorderout0flowfinalnode1in0receiveorderoutreceiveorderout0->STATE41 | acceptpaymentinacceptpaymentin0makepaymentoutmakepaymentout0receiveorderoutreceiveorderout0->STATE71 | acceptpaymentinacceptpaymentin0closeorderoutcloseorderout0flowfinalnode1in0makepaymentoutmakepaymentout0receiveorderoutreceiveorderout0->STATE65 | fillorderinfillorderin0receiveorderoutreceiveorderout0->STATE49 | closeorderoutcloseorderout0fillorderinfillorderin0flowfinalnode1in0receiveorderoutreceiveorderout0->STATE48 | acceptpaymentinacceptpaymentin0fillorderinfillorderin0makepaymentoutmakepaymentout0receiveorderoutreceiveorderout0->STATE73 | acceptpaymentinacceptpaymentin0closeorderoutcloseorderout0fillorderinfillorderin0flowfinalnode1in0makepaymentoutmakepaymentout0receiveorderoutreceiveorderout0->STATE72), STATE52 = (invoicecentralbufferinsendinvoiceoutsendinvoiceout0->STATE53 | receiveorderoutreceiveorderout0->STATE29 | closeorderincloseorderin0receiveorderoutreceiveorderout0->STATE30 | invoicecentralbufferinreceiveorderoutreceiveorderout0sendinvoiceoutsendinvoiceout0->STATE31 | closeorderincloseorderin0invoicecentralbufferinreceiveorderoutreceiveorderout0sendinvoiceoutsendinvoiceout0->STATE32 | ordercancelrequestinordercancelrequestin0->STATE54 | invoicecentralbufferinordercancelrequestinordercancelrequestin0sendinvoiceoutsendinvoiceout0->STATE55 | ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0->STATE34 | closeorderincloseorderin0ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0->STATE35 | invoicecentralbufferinordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0sendinvoiceoutsendinvoiceout0->STATE36 | closeorderincloseorderin0invoicecentralbufferinordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0sendinvoiceoutsendinvoiceout0->STATE37), STATE53 = (invoicecentralbufferoutmakepaymentinmakepaymentin0->STATE60 | receiveorderoutreceiveorderout0->STATE31 | closeorderincloseorderin0receiveorderoutreceiveorderout0->STATE32 | invoicecentralbufferoutmakepaymentinmakepaymentin0receiveorderoutreceiveorderout0->STATE45 | closeorderincloseorderin0invoicecentralbufferoutmakepaymentinmakepaymentin0receiveorderoutreceiveorderout0->STATE46 | ordercancelrequestinordercancelrequestin0->STATE55 | invoicecentralbufferoutmakepaymentinmakepaymentin0ordercancelrequestinordercancelrequestin0->STATE61 | ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0->STATE36 | closeorderincloseorderin0ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0->STATE37 | invoicecentralbufferoutmakepaymentinmakepaymentin0ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0->STATE48 | closeorderincloseorderin0invoicecentralbufferoutmakepaymentinmakepaymentin0ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0->STATE49), STATE54 = (invoicecentralbufferinsendinvoiceoutsendinvoiceout0->STATE55 | receiveorderoutreceiveorderout0->STATE34 | closeorderincloseorderin0receiveorderoutreceiveorderout0->STATE35 | invoicecentralbufferinreceiveorderoutreceiveorderout0sendinvoiceoutsendinvoiceout0->STATE36 | closeorderincloseorderin0invoicecentralbufferinreceiveorderoutreceiveorderout0sendinvoiceoutsendinvoiceout0->STATE37), STATE55 = (invoicecentralbufferoutmakepaymentinmakepaymentin0->STATE61 | receiveorderoutreceiveorderout0->STATE36 | closeorderincloseorderin0receiveorderoutreceiveorderout0->STATE37 | invoicecentralbufferoutmakepaymentinmakepaymentin0receiveorderoutreceiveorderout0->STATE48 | closeorderincloseorderin0invoicecentralbufferoutmakepaymentinmakepaymentin0receiveorderoutreceiveorderout0->STATE49), STATE56 = (closeorderoutcloseorderout0flowfinalnode1in0->STATE52 | invoicecentralbufferinsendinvoiceoutsendinvoiceout0->STATE57 | closeorderoutcloseorderout0flowfinalnode1in0invoicecentralbufferinsendinvoiceoutsendinvoiceout0->STATE53 | receiveorderoutreceiveorderout0->STATE30 | closeorderoutcloseorderout0flowfinalnode1in0receiveorderoutreceiveorderout0->STATE29 | invoicecentralbufferinreceiveorderoutreceiveorderout0sendinvoiceoutsendinvoiceout0->STATE32 | closeorderoutcloseorderout0flowfinalnode1in0invoicecentralbufferinreceiveorderoutreceiveorderout0sendinvoiceoutsendinvoiceout0->STATE31 | ordercancelrequestinordercancelrequestin0->STATE58 | closeorderoutcloseorderout0flowfinalnode1in0ordercancelrequestinordercancelrequestin0->STATE54 | invoicecentralbufferinordercancelrequestinordercancelrequestin0sendinvoiceoutsendinvoiceout0->STATE59 | closeorderoutcloseorderout0flowfinalnode1in0invoicecentralbufferinordercancelrequestinordercancelrequestin0sendinvoiceoutsendinvoiceout0->STATE55 | ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0->STATE35 | closeorderoutcloseorderout0flowfinalnode1in0ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0->STATE34 | invoicecentralbufferinordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0sendinvoiceoutsendinvoiceout0->STATE37 | closeorderoutcloseorderout0flowfinalnode1in0invoicecentralbufferinordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0sendinvoiceoutsendinvoiceout0->STATE36), STATE57 = (closeorderoutcloseorderout0flowfinalnode1in0->STATE53 | invoicecentralbufferoutmakepaymentinmakepaymentin0->STATE62 | closeorderoutcloseorderout0flowfinalnode1in0invoicecentralbufferoutmakepaymentinmakepaymentin0->STATE60 | receiveorderoutreceiveorderout0->STATE32 | closeorderoutcloseorderout0flowfinalnode1in0receiveorderoutreceiveorderout0->STATE31 | invoicecentralbufferoutmakepaymentinmakepaymentin0receiveorderoutreceiveorderout0->STATE46 | closeorderoutcloseorderout0flowfinalnode1in0invoicecentralbufferoutmakepaymentinmakepaymentin0receiveorderoutreceiveorderout0->STATE45 | ordercancelrequestinordercancelrequestin0->STATE59 | closeorderoutcloseorderout0flowfinalnode1in0ordercancelrequestinordercancelrequestin0->STATE55 | invoicecentralbufferoutmakepaymentinmakepaymentin0ordercancelrequestinordercancelrequestin0->STATE63 | closeorderoutcloseorderout0flowfinalnode1in0invoicecentralbufferoutmakepaymentinmakepaymentin0ordercancelrequestinordercancelrequestin0->STATE61 | ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0->STATE37 | closeorderoutcloseorderout0flowfinalnode1in0ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0->STATE36 | invoicecentralbufferoutmakepaymentinmakepaymentin0ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0->STATE49 | closeorderoutcloseorderout0flowfinalnode1in0invoicecentralbufferoutmakepaymentinmakepaymentin0ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0->STATE48), STATE58 = (closeorderoutcloseorderout0flowfinalnode1in0->STATE54 | invoicecentralbufferinsendinvoiceoutsendinvoiceout0->STATE59 | closeorderoutcloseorderout0flowfinalnode1in0invoicecentralbufferinsendinvoiceoutsendinvoiceout0->STATE55 | receiveorderoutreceiveorderout0->STATE35 | closeorderoutcloseorderout0flowfinalnode1in0receiveorderoutreceiveorderout0->STATE34 | invoicecentralbufferinreceiveorderoutreceiveorderout0sendinvoiceoutsendinvoiceout0->STATE37 | closeorderoutcloseorderout0flowfinalnode1in0invoicecentralbufferinreceiveorderoutreceiveorderout0sendinvoiceoutsendinvoiceout0->STATE36), STATE59 = (closeorderoutcloseorderout0flowfinalnode1in0->STATE55 | invoicecentralbufferoutmakepaymentinmakepaymentin0->STATE63 | closeorderoutcloseorderout0flowfinalnode1in0invoicecentralbufferoutmakepaymentinmakepaymentin0->STATE61 | receiveorderoutreceiveorderout0->STATE37 | closeorderoutcloseorderout0flowfinalnode1in0receiveorderoutreceiveorderout0->STATE36 | invoicecentralbufferoutmakepaymentinmakepaymentin0receiveorderoutreceiveorderout0->STATE49 | closeorderoutcloseorderout0flowfinalnode1in0invoicecentralbufferoutmakepaymentinmakepaymentin0receiveorderoutreceiveorderout0->STATE48), STATE6 = (closeorderoutcloseorderout0flowfinalnode1in0->STATE5 | fillorderoutfillorderout0forknode1sendinvoiceinsendinvoicein0shiporderinshiporderin0->STATE18 | closeorderoutcloseorderout0fillorderoutfillorderout0flowfinalnode1forknode1in0sendinvoiceinsendinvoicein0shiporderinshiporderin0->STATE12 | ordercancelrequestinordercancelrequestin0->STATE9 | closeorderoutcloseorderout0flowfinalnode1in0ordercancelrequestinordercancelrequestin0->STATE8 | fillorderoutfillorderout0forknode1ordercancelrequestinordercancelrequestin0sendinvoiceinsendinvoicein0shiporderinshiporderin0->STATE19 | closeorderoutcloseorderout0fillorderoutfillorderout0flowfinalnode1forknode1in0ordercancelrequestinordercancelrequestin0sendinvoiceinsendinvoicein0shiporderinshiporderin0->STATE13 | initialnode1outreceiveorderinreceiveorderin0->STATE20 | closeorderoutcloseorderout0flowfinalnode1in0initialnode1outreceiveorderinreceiveorderin0->STATE14 | fillorderoutfillorderout0forknode1initialnode1outreceiveorderinreceiveorderin0sendinvoiceinsendinvoicein0shiporderinshiporderin0->STATE21 | closeorderoutcloseorderout0fillorderoutfillorderout0flowfinalnode1forknode1in0initialnode1outreceiveorderinreceiveorderin0sendinvoiceinsendinvoicein0shiporderinshiporderin0->STATE15 | initialnode1ordercancelrequestinordercancelrequestin0outreceiveorderinreceiveorderin0->STATE22 | closeorderoutcloseorderout0flowfinalnode1in0initialnode1ordercancelrequestinordercancelrequestin0outreceiveorderinreceiveorderin0->STATE16 | fillorderoutfillorderout0forknode1initialnode1ordercancelrequestinordercancelrequestin0outreceiveorderinreceiveorderin0sendinvoiceinsendinvoicein0shiporderinshiporderin0->STATE23 | closeorderoutcloseorderout0fillorderoutfillorderout0flowfinalnode1forknode1in0initialnode1ordercancelrequestinordercancelrequestin0outreceiveorderinreceiveorderin0sendinvoiceinsendinvoicein0shiporderinshiporderin0->STATE17), STATE60 = (acceptpaymentinacceptpaymentin0makepaymentoutmakepaymentout0->STATE76 | receiveorderoutreceiveorderout0->STATE45 | closeorderincloseorderin0receiveorderoutreceiveorderout0->STATE46 | acceptpaymentinacceptpaymentin0makepaymentoutmakepaymentout0receiveorderoutreceiveorderout0->STATE69 | acceptpaymentinacceptpaymentin0closeorderincloseorderin0makepaymentoutmakepaymentout0receiveorderoutreceiveorderout0->STATE70 | ordercancelrequestinordercancelrequestin0->STATE61 | acceptpaymentinacceptpaymentin0makepaymentoutmakepaymentout0ordercancelrequestinordercancelrequestin0->STATE77 | ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0->STATE48 | closeorderincloseorderin0ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0->STATE49 | acceptpaymentinacceptpaymentin0makepaymentoutmakepaymentout0ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0->STATE72 | acceptpaymentinacceptpaymentin0closeorderincloseorderin0makepaymentoutmakepaymentout0ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0->STATE73), STATE61 = (acceptpaymentinacceptpaymentin0makepaymentoutmakepaymentout0->STATE77 | receiveorderoutreceiveorderout0->STATE48 | closeorderincloseorderin0receiveorderoutreceiveorderout0->STATE49 | acceptpaymentinacceptpaymentin0makepaymentoutmakepaymentout0receiveorderoutreceiveorderout0->STATE72 | acceptpaymentinacceptpaymentin0closeorderincloseorderin0makepaymentoutmakepaymentout0receiveorderoutreceiveorderout0->STATE73), STATE62 = (closeorderoutcloseorderout0flowfinalnode1in0->STATE60 | acceptpaymentinacceptpaymentin0makepaymentoutmakepaymentout0->STATE78 | acceptpaymentinacceptpaymentin0closeorderoutcloseorderout0flowfinalnode1in0makepaymentoutmakepaymentout0->STATE76 | receiveorderoutreceiveorderout0->STATE46 | closeorderoutcloseorderout0flowfinalnode1in0receiveorderoutreceiveorderout0->STATE45 | acceptpaymentinacceptpaymentin0makepaymentoutmakepaymentout0receiveorderoutreceiveorderout0->STATE70 | acceptpaymentinacceptpaymentin0closeorderoutcloseorderout0flowfinalnode1in0makepaymentoutmakepaymentout0receiveorderoutreceiveorderout0->STATE69 | ordercancelrequestinordercancelrequestin0->STATE63 | closeorderoutcloseorderout0flowfinalnode1in0ordercancelrequestinordercancelrequestin0->STATE61 | acceptpaymentinacceptpaymentin0makepaymentoutmakepaymentout0ordercancelrequestinordercancelrequestin0->STATE79 | acceptpaymentinacceptpaymentin0closeorderoutcloseorderout0flowfinalnode1in0makepaymentoutmakepaymentout0ordercancelrequestinordercancelrequestin0->STATE77 | ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0->STATE49 | closeorderoutcloseorderout0flowfinalnode1in0ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0->STATE48 | acceptpaymentinacceptpaymentin0makepaymentoutmakepaymentout0ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0->STATE73 | acceptpaymentinacceptpaymentin0closeorderoutcloseorderout0flowfinalnode1in0makepaymentoutmakepaymentout0ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0->STATE72), STATE63 = (closeorderoutcloseorderout0flowfinalnode1in0->STATE61 | acceptpaymentinacceptpaymentin0makepaymentoutmakepaymentout0->STATE79 | acceptpaymentinacceptpaymentin0closeorderoutcloseorderout0flowfinalnode1in0makepaymentoutmakepaymentout0->STATE77 | receiveorderoutreceiveorderout0->STATE49 | closeorderoutcloseorderout0flowfinalnode1in0receiveorderoutreceiveorderout0->STATE48 | acceptpaymentinacceptpaymentin0makepaymentoutmakepaymentout0receiveorderoutreceiveorderout0->STATE73 | acceptpaymentinacceptpaymentin0closeorderoutcloseorderout0flowfinalnode1in0makepaymentoutmakepaymentout0receiveorderoutreceiveorderout0->STATE72), STATE64 = (acceptpaymentoutacceptpaymentout0closeorderincloseorderin0joinnode1shiporderoutshiporderout0->STATE4 | ordercancelrequestinordercancelrequestin0->STATE65 | acceptpaymentoutacceptpaymentout0closeorderincloseorderin0joinnode1ordercancelrequestinordercancelrequestin0shiporderoutshiporderout0->STATE7 | initialnode1outreceiveorderinreceiveorderin0->STATE66 | acceptpaymentoutacceptpaymentout0closeorderincloseorderin0initialnode1joinnode1outreceiveorderinreceiveorderin0shiporderoutshiporderout0->STATE10 | initialnode1ordercancelrequestinordercancelrequestin0outreceiveorderinreceiveorderin0->STATE67 | acceptpaymentoutacceptpaymentout0closeorderincloseorderin0initialnode1joinnode1ordercancelrequestinordercancelrequestin0outreceiveorderinreceiveorderin0shiporderoutshiporderout0->STATE11), STATE65 = (acceptpaymentoutacceptpaymentout0closeorderincloseorderin0joinnode1shiporderoutshiporderout0->STATE7 | initialnode1outreceiveorderinreceiveorderin0->STATE67 | acceptpaymentoutacceptpaymentout0closeorderincloseorderin0initialnode1joinnode1outreceiveorderinreceiveorderin0shiporderoutshiporderout0->STATE11), STATE66 = (acceptpaymentoutacceptpaymentout0closeorderincloseorderin0joinnode1shiporderoutshiporderout0->STATE10 | receiveorderoutreceiveorderout0->STATE64 | closeorderincloseorderin0receiveorderoutreceiveorderout0->STATE68 | acceptpaymentoutacceptpaymentout0closeorderincloseorderin0joinnode1receiveorderoutreceiveorderout0shiporderoutshiporderout0->STATE4 | fillorderinfillorderin0receiveorderoutreceiveorderout0->STATE69 | closeorderincloseorderin0fillorderinfillorderin0receiveorderoutreceiveorderout0->STATE70 | acceptpaymentoutacceptpaymentout0closeorderincloseorderin0fillorderinfillorderin0joinnode1receiveorderoutreceiveorderout0shiporderoutshiporderout0->STATE6 | ordercancelrequestinordercancelrequestin0->STATE67 | acceptpaymentoutacceptpaymentout0closeorderincloseorderin0joinnode1ordercancelrequestinordercancelrequestin0shiporderoutshiporderout0->STATE11 | ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0->STATE65 | closeorderincloseorderin0ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0->STATE71 | acceptpaymentoutacceptpaymentout0closeorderincloseorderin0joinnode1ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0shiporderoutshiporderout0->STATE7 | fillorderinfillorderin0ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0->STATE72 | closeorderincloseorderin0fillorderinfillorderin0ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0->STATE73 | acceptpaymentoutacceptpaymentout0closeorderincloseorderin0fillorderinfillorderin0joinnode1ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0shiporderoutshiporderout0->STATE9), STATE67 = (acceptpaymentoutacceptpaymentout0closeorderincloseorderin0joinnode1shiporderoutshiporderout0->STATE11 | receiveorderoutreceiveorderout0->STATE65 | closeorderincloseorderin0receiveorderoutreceiveorderout0->STATE71 | acceptpaymentoutacceptpaymentout0closeorderincloseorderin0joinnode1receiveorderoutreceiveorderout0shiporderoutshiporderout0->STATE7 | fillorderinfillorderin0receiveorderoutreceiveorderout0->STATE72 | closeorderincloseorderin0fillorderinfillorderin0receiveorderoutreceiveorderout0->STATE73 | acceptpaymentoutacceptpaymentout0closeorderincloseorderin0fillorderinfillorderin0joinnode1receiveorderoutreceiveorderout0shiporderoutshiporderout0->STATE9), STATE68 = (closeorderoutcloseorderout0flowfinalnode1in0->STATE64 | ordercancelrequestinordercancelrequestin0->STATE71 | closeorderoutcloseorderout0flowfinalnode1in0ordercancelrequestinordercancelrequestin0->STATE65 | initialnode1outreceiveorderinreceiveorderin0->STATE74 | closeorderoutcloseorderout0flowfinalnode1in0initialnode1outreceiveorderinreceiveorderin0->STATE66 | initialnode1ordercancelrequestinordercancelrequestin0outreceiveorderinreceiveorderin0->STATE75 | closeorderoutcloseorderout0flowfinalnode1in0initialnode1ordercancelrequestinordercancelrequestin0outreceiveorderinreceiveorderin0->STATE67), STATE69 = (acceptpaymentoutacceptpaymentout0closeorderincloseorderin0joinnode1shiporderoutshiporderout0->STATE6 | ordercancelrequestinordercancelrequestin0->STATE72 | acceptpaymentoutacceptpaymentout0closeorderincloseorderin0joinnode1ordercancelrequestinordercancelrequestin0shiporderoutshiporderout0->STATE9 | initialnode1outreceiveorderinreceiveorderin0->STATE76 | acceptpaymentoutacceptpaymentout0closeorderincloseorderin0initialnode1joinnode1outreceiveorderinreceiveorderin0shiporderoutshiporderout0->STATE20 | initialnode1ordercancelrequestinordercancelrequestin0outreceiveorderinreceiveorderin0->STATE77 | acceptpaymentoutacceptpaymentout0closeorderincloseorderin0initialnode1joinnode1ordercancelrequestinordercancelrequestin0outreceiveorderinreceiveorderin0shiporderoutshiporderout0->STATE22), STATE7 = (closeorderoutcloseorderout0flowfinalnode1in0->STATE1 | initialnode1outreceiveorderinreceiveorderin0->STATE11 | closeorderoutcloseorderout0flowfinalnode1in0initialnode1outreceiveorderinreceiveorderin0->STATE3), STATE70 = (closeorderoutcloseorderout0flowfinalnode1in0->STATE69 | ordercancelrequestinordercancelrequestin0->STATE73 | closeorderoutcloseorderout0flowfinalnode1in0ordercancelrequestinordercancelrequestin0->STATE72 | initialnode1outreceiveorderinreceiveorderin0->STATE78 | closeorderoutcloseorderout0flowfinalnode1in0initialnode1outreceiveorderinreceiveorderin0->STATE76 | initialnode1ordercancelrequestinordercancelrequestin0outreceiveorderinreceiveorderin0->STATE79 | closeorderoutcloseorderout0flowfinalnode1in0initialnode1ordercancelrequestinordercancelrequestin0outreceiveorderinreceiveorderin0->STATE77), STATE71 = (closeorderoutcloseorderout0flowfinalnode1in0->STATE65 | initialnode1outreceiveorderinreceiveorderin0->STATE75 | closeorderoutcloseorderout0flowfinalnode1in0initialnode1outreceiveorderinreceiveorderin0->STATE67), STATE72 = (acceptpaymentoutacceptpaymentout0closeorderincloseorderin0joinnode1shiporderoutshiporderout0->STATE9 | initialnode1outreceiveorderinreceiveorderin0->STATE77 | acceptpaymentoutacceptpaymentout0closeorderincloseorderin0initialnode1joinnode1outreceiveorderinreceiveorderin0shiporderoutshiporderout0->STATE22), STATE73 = (closeorderoutcloseorderout0flowfinalnode1in0->STATE72 | initialnode1outreceiveorderinreceiveorderin0->STATE79 | closeorderoutcloseorderout0flowfinalnode1in0initialnode1outreceiveorderinreceiveorderin0->STATE77), STATE74 = (closeorderoutcloseorderout0flowfinalnode1in0->STATE66 | receiveorderoutreceiveorderout0->STATE68 | closeorderoutcloseorderout0flowfinalnode1in0receiveorderoutreceiveorderout0->STATE64 | fillorderinfillorderin0receiveorderoutreceiveorderout0->STATE70 | closeorderoutcloseorderout0fillorderinfillorderin0flowfinalnode1in0receiveorderoutreceiveorderout0->STATE69 | ordercancelrequestinordercancelrequestin0->STATE75 | closeorderoutcloseorderout0flowfinalnode1in0ordercancelrequestinordercancelrequestin0->STATE67 | ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0->STATE71 | closeorderoutcloseorderout0flowfinalnode1in0ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0->STATE65 | fillorderinfillorderin0ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0->STATE73 | closeorderoutcloseorderout0fillorderinfillorderin0flowfinalnode1in0ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0->STATE72), STATE75 = (closeorderoutcloseorderout0flowfinalnode1in0->STATE67 | receiveorderoutreceiveorderout0->STATE71 | closeorderoutcloseorderout0flowfinalnode1in0receiveorderoutreceiveorderout0->STATE65 | fillorderinfillorderin0receiveorderoutreceiveorderout0->STATE73 | closeorderoutcloseorderout0fillorderinfillorderin0flowfinalnode1in0receiveorderoutreceiveorderout0->STATE72), STATE76 = (acceptpaymentoutacceptpaymentout0closeorderincloseorderin0joinnode1shiporderoutshiporderout0->STATE20 | receiveorderoutreceiveorderout0->STATE69 | closeorderincloseorderin0receiveorderoutreceiveorderout0->STATE70 | acceptpaymentoutacceptpaymentout0closeorderincloseorderin0joinnode1receiveorderoutreceiveorderout0shiporderoutshiporderout0->STATE6 | ordercancelrequestinordercancelrequestin0->STATE77 | acceptpaymentoutacceptpaymentout0closeorderincloseorderin0joinnode1ordercancelrequestinordercancelrequestin0shiporderoutshiporderout0->STATE22 | ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0->STATE72 | closeorderincloseorderin0ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0->STATE73 | acceptpaymentoutacceptpaymentout0closeorderincloseorderin0joinnode1ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0shiporderoutshiporderout0->STATE9), STATE77 = (acceptpaymentoutacceptpaymentout0closeorderincloseorderin0joinnode1shiporderoutshiporderout0->STATE22 | receiveorderoutreceiveorderout0->STATE72 | closeorderincloseorderin0receiveorderoutreceiveorderout0->STATE73 | acceptpaymentoutacceptpaymentout0closeorderincloseorderin0joinnode1receiveorderoutreceiveorderout0shiporderoutshiporderout0->STATE9), STATE78 = (closeorderoutcloseorderout0flowfinalnode1in0->STATE76 | receiveorderoutreceiveorderout0->STATE70 | closeorderoutcloseorderout0flowfinalnode1in0receiveorderoutreceiveorderout0->STATE69 | ordercancelrequestinordercancelrequestin0->STATE79 | closeorderoutcloseorderout0flowfinalnode1in0ordercancelrequestinordercancelrequestin0->STATE77 | ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0->STATE73 | closeorderoutcloseorderout0flowfinalnode1in0ordercancelrequestinordercancelrequestin0receiveorderoutreceiveorderout0->STATE72), STATE79 = (closeorderoutcloseorderout0flowfinalnode1in0->STATE77 | receiveorderoutreceiveorderout0->STATE73 | closeorderoutcloseorderout0flowfinalnode1in0receiveorderoutreceiveorderout0->STATE72), STATE8 = (fillorderoutfillorderout0forknode1sendinvoiceinsendinvoicein0shiporderinshiporderin0->STATE13 | initialnode1outreceiveorderinreceiveorderin0->STATE16 | fillorderoutfillorderout0forknode1initialnode1outreceiveorderinreceiveorderin0sendinvoiceinsendinvoicein0shiporderinshiporderin0->STATE17), STATE9 = (closeorderoutcloseorderout0flowfinalnode1in0->STATE8 | fillorderoutfillorderout0forknode1sendinvoiceinsendinvoicein0shiporderinshiporderin0->STATE19 | closeorderoutcloseorderout0fillorderoutfillorderout0flowfinalnode1forknode1in0sendinvoiceinsendinvoicein0shiporderinshiporderin0->STATE13 | initialnode1outreceiveorderinreceiveorderin0->STATE22 | closeorderoutcloseorderout0flowfinalnode1in0initialnode1outreceiveorderinreceiveorderin0->STATE16 | fillorderoutfillorderout0forknode1initialnode1outreceiveorderinreceiveorderin0sendinvoiceinsendinvoicein0shiporderinshiporderin0->STATE23 | closeorderoutcloseorderout0fillorderoutfillorderout0flowfinalnode1forknode1in0initialnode1outreceiveorderinreceiveorderin0sendinvoiceinsendinvoicein0shiporderinshiporderin0->STATE17).";
		String formula = "G ordercancelrequestin -> (X cancelorder && not (shiporder U cancelorder))";		// ArrayList<String> f = r.extractActionsFromLTLFormula(formula);
		String red = r.hideOtherActions(sysdesc, formula);
		// System.out.println(formula);
		System.out.println(sysdesc);
		// System.out.println("Original:  "+sysdesc);
		System.out.println("Reduction:  " + red);
		// System.out.println(formula);
		// f.add("ordercancelrequest");

		// System.out.println(s);
	}

	public String hideOtherActions(String systemDesc, String ltlFormula) {
		String reducedDesc = "";
		ArrayList<String> splittedFormula = extractActionsFromLTLFormula(ltlFormula);
		ArrayList<String> arreducedDesc = reduce(systemDesc, splittedFormula);
		for (String s : arreducedDesc) {
			reducedDesc += s;
		}
		reducedDesc+="."+newline + getFormula(ltlFormula);
		return reducedDesc;
	}

	private String getFormula(String ltlFormula) {
		String formula = ltlFormula;//TODO:/??????????????T.toLowerCase();//???
		int beg = 0;
		int idx = findNextXUR(formula, beg);
		while (idx>0){
			if (idx>0 && idx<formula.length()-1){
				char[] temp;
				if (!Character.isLetter(formula.charAt(idx-1)) && !Character.isLetter(formula.charAt(idx+1))){
					 temp = formula.toCharArray(); 
				     temp[idx] = Character.toUpperCase(formula.charAt(idx));
				     formula = String.valueOf(temp);
				}
			}
			if (idx < formula.length())
				beg = idx+1;
			idx = findNextXUR(formula, beg);
		}
		return "assert PRPTY = " + formula;
	}

	private int findNextXUR(String str, int beg) {
		int x = str.indexOf("x", beg);
		x = (x<0)?Integer.MAX_VALUE:x;
		int u = str.indexOf("u", beg);
		u = (u<0)?Integer.MAX_VALUE:u;
		int r = str.indexOf("r", beg);
		r = (r<0)?Integer.MAX_VALUE:r;
		int res = Math.min(Math.min(x, u), r);
		if (res == Integer.MAX_VALUE)
			res = -1;
		return res;
	}

	
	
	private ArrayList<String> extractActionsFromLTLFormula(String formula) {
		formula = formula.toLowerCase();
		int idx = 0;
		ArrayList<String> actions = new ArrayList<String>();
		int beg = 0;
		idx = 0;
		while (idx < formula.length()) {
			while (idx < formula.length()
					&& Character.isLowerCase(formula.charAt(idx)))
				idx++;
			if (idx > beg && idx < formula.length()) {
				String newAction = formula.substring(beg, idx);
				if (!actions.contains(newAction))
					actions.add(newAction);
				beg = idx;
			}
			while (idx < formula.length()
					&& !Character.isLowerCase(formula.charAt(idx))) {
				idx++;
				beg = idx;
			}
		}
		actions.remove("not");
		actions.remove("x");
		actions.remove("f");
		actions.remove("u");
		return actions;
	}

	private ArrayList<String> reduce(String txt, ArrayList<String> frm) {
		String addword = "";
		ArrayList<String> niuewparts = new ArrayList<String>();
		ArrayList<String> reduced = new ArrayList<String>();
		String word = nextWord(txt);
		while (word.length() > 0) {
			if (word.contains("=") || word.contains("|") || word.contains(" ")
					|| word.contains(",") || word.contains("-")
					|| word.contains(">") || word.contains("(")
					|| word.contains(")")) {
			} else if (word.toLowerCase().compareTo(word) == 0) {
				word = word.trim();
				for (String s : frm) {
					if (word.compareToIgnoreCase(s) == 0) {
						boolean add = true;
						if (niuewparts.contains(s))
							add = false;
						/*else {
							for (String tmp : niuewparts)
								if (tmp.contains(s)) {
									niuewparts.set(niuewparts.indexOf(tmp), s);
									add = false;
								}
						}*/
						if (add)
							niuewparts.add(s);
					} else if (word.contains(s)) {
						boolean add = true;
						if (niuewparts.contains(s))
							add = false;
					/*	else {
							for (String tmp : niuewparts)
								if (tmp.contains(s)) {
									add = false;
								}
						}*/
						if (add)
							niuewparts.add(s);
					}
				}
				if (niuewparts.size() == 0)
					addword = "silence";
				else {
					System.out.println("Niw parts:");
					for (String s : niuewparts) {
						addword += s;
						System.out.print(s + ",");
					}
					System.out.println();
				}
			}
			// System.out.print("Old word : "+word);

			// System.out.println("           -> New word : "+word);
			if (addword == "")
				addword = word;
			reduced.add(addword);
			word = nextWord(txt);
			addword = "";
			niuewparts.clear();
		}
		return reduced;
	}

	private String nextWord(String input) {
		int i = loc;
		char[] txt = input.toCharArray();
		if (i < txt.length) {
			if (txt[i] == ' ' || txt[i] == '=' || txt[i] == '-'
					|| txt[i] == '(' || txt[i] == '|' || txt[i] == ',')
				while (txt[i] == '>' || txt[i] == ' ' || txt[i] == '='
						|| txt[i] == '-' || txt[i] == '(' || txt[i] == '|'
						|| txt[i] == ',') {
					i++;
				}
			else if (!(txt[i] == ' ' || txt[i] == '=' || txt[i] == '-'
					|| txt[i] == '(' || txt[i] == '|' || txt[i] == ',' || txt[i] == '.'))
				while (!(txt[i] == '>' || txt[i] == ' ' || txt[i] == '='
						|| txt[i] == '-' || txt[i] == '(' || txt[i] == '|'
						|| txt[i] == ',' || txt[i] == '.')) {
					i++;
				}
		}
		String res = input.substring(loc, i);
		loc = i;
		// System.out.println("Niew word:"+res);
		return res;
	}
}
